<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{admin/admin_layout}">
<head>
</head>

<body>

	<!-- 실제로 삽입되는 부분 -->
	<section layout:fragment="content" th:fragment="content">
		<!-- 페이지 전용 CSS -->
		<link rel="stylesheet" th:href="@{/admin/css/category.css}" />
		<div class="admin-container" style="margin-top: var(--header-height);">
			<div class="page-header">
				<h2>브랜드 카테고리 관리</h2>
				<button class="category_addbtn" name="category_addbtn" type="button">카테고리
					추가</button>
			</div>
		</div>
		<div class="brand-list-wrapper">
			<ul class="brand-category-list">
				<li><span class="brand-name">NIKE</span>
					<button type="button" class="addcartgory">수정</button>
					<button type="button">삭제</button></li>
				<li><span class="brand-name">ADIDAS</span>
					<button type="button" class="addcartgory">수정</button>
					<button type="button">삭제</button></li>
				<li><span class="brand-name">NEW BALANCE</span>
					<button type="button" class="addcartgory">수정</button>
					<button type="button">삭제</button></li>
				<li><span class="brand-name">VANS</span>
					<button type="button" class="addcartgory">수정</button>
					<button type="button">삭제</button></li>
			</ul>
		</div>
		
		<!-- 페이지 전용 JS -->
		<script th:src="@{/admin/js/page-specific.js}"></script>
		<script>
			// 모달 열기
			function openEditModal(name, category, imgFile) {
				document.getElementById('brandName').value = name;
				document.getElementById('brandCategory').value = category;
				// 이미지 미리보기
				if (imgFile) {
					document.getElementById('brandImgPreview').src = imgFile;
					document.getElementById('brandImgPreview').style.display = 'block';
				} else {
					document.getElementById('brandImgPreview').style.display = 'none';
				}
				document.getElementById('brandImage').value = '';
				document.getElementById('editModalBg').classList.add('active');
			}
			// 모달 닫기
			function closeEditModal() {
				document.getElementById('editModalBg').classList
						.remove('active');
			}
			// 이미지 미리보기
			document
					.getElementById('brandImage')
					.addEventListener(
							'change',
							function(e) {
								const file = e.target.files[0];
								if (file) {
									const reader = new FileReader();
									reader.onload = function(ev) {
										document
												.getElementById('brandImgPreview').src = ev.target.result;
										document
												.getElementById('brandImgPreview').style.display = 'block';
									}
									reader.readAsDataURL(file);
								}
							});
			// 폼 제출(저장) 예시
			document.getElementById('editBrandForm').onsubmit = function(e) {
				e.preventDefault();
				alert('저장 기능을 구현하세요!');
				closeEditModal();
			}
			// ESC로 모달 닫기
			document.addEventListener('keydown', function(e) {
				if (e.key === "Escape")
					closeEditModal();
			});
			// 모달 바깥 클릭 시 닫기
			document.getElementById('editModalBg').addEventListener('click',
					function(e) {
						if (e.target === this)
							closeEditModal();
					});
		</script>
	</section>

</body>
</html>
